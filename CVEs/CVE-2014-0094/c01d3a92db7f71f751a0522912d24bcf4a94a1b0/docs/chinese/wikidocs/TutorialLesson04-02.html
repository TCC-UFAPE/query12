<html>
    <head>
        <title>WebWork 2 : TutorialLesson04-02</title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=GBK">	    
    </head>

    <body>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <div class="pageheader">
					    <span class="pagetitle">
                            WebWork 2 : TutorialLesson04-02
                                                    </span>
				    </div>
				    <div class="pagesubheading">
					    This page last changed on Sep 16, 2004 by <font color="#0050B2">vitorsouza</font>.
				    </div>

				    <p class="paragraph"><h1 style="margin: 4px 0px 4px 0px;" class="heading1"><a name="TutorialLesson04-02-Lesson4.2%3AUsingVelocitywithWebWork"> 4.2: 在WebWork中使用Velocity</a></h1></p>有两种方法可以利用Velocity作为视图.<br/>

<ul class="star">
<li> 使用<tt class="monospaced">velocity</tt>结果类型绘制velocity模版;</li>
<li> 在<tt class="monospaced">web.xml</tt>文件中注册<tt class="monospaced">WebWorkVelocityServlet</tt>以便直接通过浏览器请求绘制Velocity模版.</li>
</ul><br/>
为使用第二种方式, 必须修改<tt class="monospaced">web.xml</tt>文件加入<tt class="monospaced">WebWorkVelocityServlet</tt>的servlet定义及其映射, 如下:<br/>

<div class="code"><div class="codeContent">
<pre><span class="xml&#45;tag">&lt;servlet&gt;</span> &#10;	<span class="xml&#45;tag">&lt;servlet&#45;name&gt;</span>velocity<span class="xml&#45;tag">&lt;/servlet&#45;name&gt;</span> &#10;	<span class="xml&#45;tag">&lt;servlet&#45;class&gt;</span>com.opensymphony.webwork.views.velocity.WebWorkVelocityServlet<span class="xml&#45;tag">&lt;/servlet&#45;class&gt;</span> &#10;	<span class="xml&#45;tag">&lt;load&#45;on&#45;startup&gt;</span>1<span class="xml&#45;tag">&lt;/load&#45;on&#45;startup&gt;</span> &#10;<span class="xml&#45;tag">&lt;/servlet&gt;</span> &#10;&#10;<span class="xml&#45;tag">&lt;servlet&#45;mapping&gt;</span> &#10;	<span class="xml&#45;tag">&lt;servlet&#45;name&gt;</span>velocity<span class="xml&#45;tag">&lt;/servlet&#45;name&gt;</span> &#10;	<span class="xml&#45;tag">&lt;url&#45;pattern&gt;</span>&#42;.vm<span class="xml&#45;tag">&lt;/url&#45;pattern&gt;</span> &#10;<span class="xml&#45;tag">&lt;/servlet&#45;mapping&gt;</span></pre>
</div></div><br/>

<blockquote class="blockquote"> 进一步阅读: <a href="xwork.xml.html" title="xwork.xml">xwork.xml</a></blockquote><p class="paragraph">使用<tt class="monospaced">velocity</tt>结果类型意味着Velocity模版仅能通过活动进行绘制, 换言之, 访问<tt class="monospaced">.vm</tt>页面将不会进行绘制而直接返回文本内容. 如果你选择这种方式, 推荐你将Velocity文件放在<tt class="monospaced">WEB-INF</tt>目录下使其不可访问.</p>使用<tt class="monospaced">WebWorkVelocityServlet</tt>意味着Velocity模版可以通过对<tt class="monospaced">.vm</tt>页面的请求进行绘制. 这也意味着需要对模版实现安全检查, 以便用户不能绕过活动(如果这是必需的)直接访问它. <p class="paragraph">不管你选择哪种方式(你也可以选择同时使用两种方式), 当你编写模版时不仅可以使用全部Velocity的特性, 还可以使用WebWork提供的其他功能. 这里假设你已经熟悉了Velocity, 因此我们仅关注WebWork提供的特性. 如果你不熟悉, 清在继续阅读之前参阅'<a href="http://jakarta.apache.org/velocity/getting-started.html" title="Visit page outside Confluence">开始Velocity之旅</a>'.</p>主要特性是提供了对值栈中对象方便的访问途径, 这里包含了WebWork自动提供的一些内容, 因为你在某些地方会发现它的价值. 这是值栈中包含的部分对象:<br/>

<ul class="star">
<li> 当前的<tt class="monospaced">HttpServletRequest</tt>;</li>
<li> 当前的<tt class="monospaced">HttpServletResponse</tt>;</li>
<li> 当前的<tt class="monospaced">OgnlValueStack</tt>;</li>
<li> 一个<tt class="monospaced">OgnlTool</tt>的实例;</li>
<li>当前活动类的全部属性.</li>
</ul><br/>
要访问值栈中的数据, 你只须使用适当的Velocity引用:<br/>

<ul class="star">
<li> <b class="strong"><tt class="monospaced">$req</tt></b> = <tt class="monospaced">HttpServletRequest</tt>;</li>
<li> <b class="strong"><tt class="monospaced">$res</tt></b> = <tt class="monospaced">HttpServletResponse</tt>;</li>
<li> <b class="strong"><tt class="monospaced">$stack</tt></b> = <tt class="monospaced">OgnlValueStack</tt>;</li>
<li> <b class="strong"><tt class="monospaced">$ognl</tt></b> = <tt class="monospaced">OgnlTool</tt>;</li>
<li> <b class="strong"><tt class="monospaced">$name-of-property</tt></b> = property of the current action class.</li>
</ul><br/>
下面的例子完成了与<a href="TutorialLesson03.html" title="TutorialLesson03">第三课</a>相同的功能, 但是现在使用Velocity模版做为结果. 需要注意的是<tt class="monospaced">&lt;property value=&quot;person&quot; /&gt;</tt>标签被替换成<tt class="monospaced">$person</tt>引用, 它返回同样的内容: 活动类的一个属性. 本例中我们使用了<em class="emphasis"><tt class="monospaced">velocity</tt>结果类型</em>方式.<p class="paragraph"><h3 class="heading3"><a name="TutorialLesson04-02-xwork.xml%3A"> xwork.xml:</a></h3>
<div class="code"><div class="codeContent">
<pre><span class="xml&#45;tag">&lt;&#33;DOCTYPE xwork PUBLIC <span class="xml&#45;quote">&quot;&#45;//OpenSymphony Group//XWork 1.0//EN&quot;</span> &#10;<span class="xml&#45;quote">&quot;&#104;ttp://www.opensymphony.com/xwork/xwork&#45;1.0.dtd&quot;</span>&gt;</span>&#10;&#10;<span class="xml&#45;tag">&lt;xwork&gt;</span>&#10;	<span class="xml&#45;tag"><span class="xml&#45;comment">&lt;&#33;&#45;&#45; Include webwork defaults (from WebWork JAR). &#45;&#45;&gt;</span></span>&#10;	<span class="xml&#45;tag">&lt;include file=<span class="xml&#45;quote">&quot;webwork&#45;default.xml&quot;</span> /&gt;</span>&#10;	&#10;	<span class="xml&#45;tag"><span class="xml&#45;comment">&lt;&#33;&#45;&#45; Configuration for the default package. &#45;&#45;&gt;</span></span>&#10;	<span class="xml&#45;tag">&lt;package name=<span class="xml&#45;quote">&quot;default&quot;</span> extends=<span class="xml&#45;quote">&quot;webwork&#45;default&quot;</span>&gt;</span>&#10;		<span class="xml&#45;tag"><span class="xml&#45;comment">&lt;&#33;&#45;&#45; Default interceptor stack. &#45;&#45;&gt;</span></span> &#10;		<span class="xml&#45;tag">&lt;default&#45;interceptor&#45;ref name=<span class="xml&#45;quote">&quot;defaultStack&quot;</span> /&gt;</span> &#10;		&#10;		<span class="xml&#45;tag"><span class="xml&#45;comment">&lt;&#33;&#45;&#45; Action: Lesson 4.2: HelloAction using Velocity as result. &#45;&#45;&gt;</span></span>&#10;		<span class="xml&#45;tag">&lt;action name=<span class="xml&#45;quote">&quot;helloVelocity&quot;</span> class=<span class="xml&#45;quote">&quot;lesson03.HelloAction&quot;</span>&gt;</span>&#10;			<span class="xml&#45;tag">&lt;result name=<span class="xml&#45;quote">&quot;error&quot;</span> type=<span class="xml&#45;quote">&quot;dispatcher&quot;</span>&gt;</span>ex01&#45;index.jsp<span class="xml&#45;tag">&lt;/result&gt;</span>&#10;			<span class="xml&#45;tag">&lt;result name=<span class="xml&#45;quote">&quot;success&quot;</span> type=<span class="xml&#45;quote">&quot;velocity&quot;</span>&gt;</span>ex01&#45;success.vm<span class="xml&#45;tag">&lt;/result&gt;</span>&#10;		<span class="xml&#45;tag">&lt;/action&gt;</span>&#10;	<span class="xml&#45;tag">&lt;/package&gt;</span>&#10;<span class="xml&#45;tag">&lt;/xwork&gt;</span></pre>
</div></div></p><h3 class="heading3"><a name="TutorialLesson04-02-HelloAction.java%28sameaslesson3%29%3A"> HelloAction.java (与第三课相同):</a></h3>
<div class="code"><div class="codeContent">
<pre><span class="java&#45;keyword">package</span> lesson03;&#10;&#10;<span class="java&#45;keyword">import</span> com.opensymphony.xwork.ActionSupport;&#10;&#10;<span class="java&#45;keyword">public</span> class HelloAction <span class="java&#45;keyword">extends</span> ActionSupport &#123;&#10;	<span class="java&#45;object">String</span> person;&#10;	<span class="java&#45;keyword">public</span>&#160;<span class="java&#45;object">String</span> getPerson() &#123;&#10;		<span class="java&#45;keyword">return</span> person;&#10;	&#125;&#10;	<span class="java&#45;keyword">public</span> void setPerson(<span class="java&#45;object">String</span> person) &#123;&#10;		<span class="java&#45;keyword">this</span>.person = person;&#10;	&#125;&#10;	<span class="java&#45;keyword">public</span>&#160;<span class="java&#45;object">String</span> execute() <span class="java&#45;keyword">throws</span> Exception &#123;&#10;		<span class="java&#45;keyword">if</span> ((person == <span class="java&#45;keyword">null</span>) || (person.length() == 0)) <span class="java&#45;keyword">return</span> ERROR;&#10;		<span class="java&#45;keyword">else</span>&#160;<span class="java&#45;keyword">return</span> SUCCESS;&#10;	&#125;&#10;&#125;</pre>
</div></div><p class="paragraph"><h3 class="heading3"><a name="TutorialLesson04-02-ex01index.jsp%28sameaslesson3%29%3A"> ex01-index.jsp (与第三课相同):</a></h3>
<div class="code"><div class="codeContent">
<pre>&lt;html&gt;&#10;&lt;head&gt;&#10;&lt;title&gt;WebWork Tutorial &#45; Lesson 3 &#45; Example 2&lt;/title&gt;&#10;&lt;/head&gt;&#10;&#10;&lt;body&gt;&#10;&#10;&lt;p&gt;What&#039;s your name&#63;&lt;/p&gt;&#10;&#10;&lt;form action=<span class="java&#45;quote">&quot;hello.action&quot;</span> method=<span class="java&#45;quote">&quot;post&quot;</span>&gt;&#10;&lt;p&gt;&lt;input type=<span class="java&#45;quote">&quot;text&quot;</span> name=<span class="java&#45;quote">&quot;person&quot;</span> /&gt;&lt;input type=<span class="java&#45;quote">&quot;submit&quot;</span> /&gt;&lt;/p&gt;&#10;&lt;/form&gt;&#10;&#10;&lt;/body&gt;&#10;&lt;/html&gt;</pre>
</div></div></p><h3 class="heading3"><a name="TutorialLesson04-02-ex01success.vm%3A"> ex01-success.vm:</a></h3>
<div class="code"><div class="codeContent">
<pre>&lt;html&gt; &#10;&lt;head&gt; &#10;&lt;title&gt;WebWork Tutorial &#45; Lesson 4.2 &#45; Example 1&lt;/title&gt; &#10;&lt;/head&gt; &#10;&lt;body&gt; &#10;&#10;Hello, $person &#10;&#10;&lt;/body&gt; &#10;&lt;/html&gt;</pre>
</div></div><br/>

<blockquote class="blockquote"> <a href="TutorialExamples.html" title="TutorialExamples">试试这个例子!</a></blockquote>
<p class="paragraph"><h2 class="heading2"><a name="TutorialLesson04-02-UsingWebWorkTagsfromVelocity%3A"> 在Velocity使用WebWork的UI标签:</a></h2></p>如你所知, 从JSP转换到Velocity时失去了使用JSP标签的能力. 但WebWork的VelocityServlet提供一个方法: 使用<tt class="monospaced">#tag</tt>, <tt class="monospaced">#bodytag</tt>和<tt class="monospaced">#param</tt>Velocity宏定义(velocimacros). 语法如下:<br/>

<div class="code"><div class="codeContent">
<pre>#tag (name&#45;of&#45;tag list&#45;of&#45;attributes)</pre>
</div></div><p class="paragraph">&#8211; 或 &#8211;</p><div class="code"><div class="codeContent">
<pre>#bodytag (name&#45;of&#45;tag list&#45;of&#45;attributes)&#10;	#param (key value)&#10;	#param (key value)&#10;...&#10;#end</pre>
</div></div><p class="paragraph">让我们回顾<a href="TutorialLesson04-01-01.html" title="TutorialLesson04-01-01">4.1.1</a>的表单示例来演示在velocity中使用UI标签的用法:</p><h3 class="heading3"><a name="TutorialLesson04-02-xwork.xml%3A"> xwork.xml:</a></h3>
<div class="code"><div class="codeContent">
<pre><span class="xml&#45;tag">&lt;&#33;DOCTYPE xwork PUBLIC <span class="xml&#45;quote">&quot;&#45;//OpenSymphony Group//XWork 1.0//EN&quot;</span> &#10;<span class="xml&#45;quote">&quot;&#104;ttp://www.opensymphony.com/xwork/xwork&#45;1.0.dtd&quot;</span>&gt;</span>&#10;&#10;<span class="xml&#45;tag">&lt;xwork&gt;</span>&#10;	<span class="xml&#45;tag"><span class="xml&#45;comment">&lt;&#33;&#45;&#45; Include webwork defaults (from WebWork JAR). &#45;&#45;&gt;</span></span>&#10;	<span class="xml&#45;tag">&lt;include file=<span class="xml&#45;quote">&quot;webwork&#45;default.xml&quot;</span> /&gt;</span>&#10;	&#10;	<span class="xml&#45;tag"><span class="xml&#45;comment">&lt;&#33;&#45;&#45; Configuration for the default package. &#45;&#45;&gt;</span></span>&#10;	<span class="xml&#45;tag">&lt;package name=<span class="xml&#45;quote">&quot;default&quot;</span> extends=<span class="xml&#45;quote">&quot;webwork&#45;default&quot;</span>&gt;</span>&#10;		<span class="xml&#45;tag"><span class="xml&#45;comment">&lt;&#33;&#45;&#45; Default interceptor stack. &#45;&#45;&gt;</span></span> &#10;		<span class="xml&#45;tag">&lt;default&#45;interceptor&#45;ref name=<span class="xml&#45;quote">&quot;defaultStack&quot;</span> /&gt;</span> &#10;		&#10;		<span class="xml&#45;tag"><span class="xml&#45;comment">&lt;&#33;&#45;&#45; Actions: Lesson 4.2: FormProcessingAction using Velocity. &#45;&#45;&gt;</span></span> &#10;		<span class="xml&#45;tag">&lt;action name=<span class="xml&#45;quote">&quot;formProcessingVelocityIndex&quot;</span> class=<span class="xml&#45;quote">&quot;lesson04&#95;02.FormProcessingIndexAction&quot;</span>&gt;</span>&#10;			<span class="xml&#45;tag">&lt;result name=<span class="xml&#45;quote">&quot;success&quot;</span> type=<span class="xml&#45;quote">&quot;velocity&quot;</span>&gt;</span>ex02&#45;index.vm<span class="xml&#45;tag">&lt;/result&gt;</span>&#10;		<span class="xml&#45;tag">&lt;/action&gt;</span>&#10;		<span class="xml&#45;tag">&lt;action name=<span class="xml&#45;quote">&quot;formProcessingVelocity&quot;</span> class=<span class="xml&#45;quote">&quot;lesson04&#95;01&#95;01.FormProcessingAction&quot;</span>&gt;</span> &#10;			<span class="xml&#45;tag">&lt;result name=<span class="xml&#45;quote">&quot;input&quot;</span> type=<span class="xml&#45;quote">&quot;velocity&quot;</span>&gt;</span>ex02&#45;index.vm<span class="xml&#45;tag">&lt;/result&gt;</span> &#10;			<span class="xml&#45;tag">&lt;result name=<span class="xml&#45;quote">&quot;success&quot;</span> type=<span class="xml&#45;quote">&quot;velocity&quot;</span>&gt;</span>ex02&#45;success.vm<span class="xml&#45;tag">&lt;/result&gt;</span> &#10;			<span class="xml&#45;tag">&lt;interceptor&#45;ref name=<span class="xml&#45;quote">&quot;validationWorkflowStack&quot;</span> /&gt;</span> &#10;		<span class="xml&#45;tag">&lt;/action&gt;</span> &#10;	<span class="xml&#45;tag">&lt;/package&gt;</span>&#10;<span class="xml&#45;tag">&lt;/xwork&gt;</span></pre>
</div></div><p class="paragraph"><h3 class="heading3"><a name="TutorialLesson04-02-ex02index.vm%3A"> ex02-index.vm:</a></h3>
<div class="code"><div class="codeContent">
<pre>&lt;html&gt; &#10;&lt;head&gt; &#10;&lt;title&gt;WebWork Tutorial &#45; Lesson 4.2 &#45; Example 2&lt;/title&gt; &#10;&lt;style type=<span class="java&#45;quote">&quot;text/css&quot;</span>&gt; &#10;  .errorMessage &#123; color: red; &#125; &#10;&lt;/style&gt;   &#10;&lt;/head&gt; &#10;&#10;&lt;body&gt; &#10;&#10;&lt;p&gt;UI Form Tags Example using Velocity:&lt;/p&gt; &#10;&#10;#bodytag (Form <span class="java&#45;quote">&quot;action=&#039;formProcessingVelocity.action&#039;&quot;</span>&#160;<span class="java&#45;quote">&quot;method=&#039;post&#039;&quot;</span>) &#10;	#tag (Checkbox <span class="java&#45;quote">&quot;name=&#039;checkbox&#039;&quot;</span>&#160;<span class="java&#45;quote">&quot;label=&#039;A checkbox&#039;&quot;</span>&#160;<span class="java&#45;quote">&quot;fieldValue=&#039;checkbox&#95;value&#039;&quot;</span>) &#10;	#tag (File <span class="java&#45;quote">&quot;name=&#039;file&#039;&quot;</span>&#160;<span class="java&#45;quote">&quot;label=&#039;A file field&#039;&quot;</span>) &#10;	#tag (Hidden <span class="java&#45;quote">&quot;name=&#039;hidden&#039;&quot;</span>&#160;<span class="java&#45;quote">&quot;value=&#039;hidden&#95;value&#039;&quot;</span>) &#10;	#tag (Label <span class="java&#45;quote">&quot;label=&#039;A label&#039;&quot;</span>) &#10;	#tag (Password <span class="java&#45;quote">&quot;name=&#039;password&#039;&quot;</span>&#160;<span class="java&#45;quote">&quot;label=&#039;A password field&#039;&quot;</span>) &#10;	#tag (Radio <span class="java&#45;quote">&quot;name=&#039;radio&#039;&quot;</span>&#160;<span class="java&#45;quote">&quot;label=&#039;Radio buttons&#039;&quot;</span>&#160;<span class="java&#45;quote">&quot;list=&#123;&#039;One&#039;, &#039;Two&#039;, &#039;Three&#039;&#125;&quot;</span>) &#10;	#tag (Select <span class="java&#45;quote">&quot;name=&#039;select&#039;&quot;</span>&#160;<span class="java&#45;quote">&quot;label=&#039;A select list&#039;&quot;</span>&#160;<span class="java&#45;quote">&quot;list=&#123;&#039;One&#039;, &#039;Two&#039;, &#039;Three&#039;&#125;&quot;</span> &#10;		<span class="java&#45;quote">&quot;emptyOption=<span class="java&#45;keyword">true</span>&quot;</span>) &#10;	#tag (Textarea <span class="java&#45;quote">&quot;name=&#039;textarea&#039;&quot;</span>&#160;<span class="java&#45;quote">&quot;label=&#039;A text area&#039;&quot;</span>&#160;<span class="java&#45;quote">&quot;rows=&#039;3&#039;&quot;</span>&#160;<span class="java&#45;quote">&quot;cols=&#039;40&#039;&quot;</span>) &#10;	#tag (TextField <span class="java&#45;quote">&quot;name=&#039;textfield&#039;&quot;</span>&#160;<span class="java&#45;quote">&quot;label=&#039;A text field&#039;&quot;</span>) &#10;	#tag (Submit <span class="java&#45;quote">&quot;value=&#039;Send Form&#039;&quot;</span>) &#10;#end &#10;&#10;&lt;/body&gt; &#10;&lt;/html&gt;</pre>
</div></div></p><h3 class="heading3"><a name="TutorialLesson04-02-ex02success.vm%3A"> ex02-success.vm:</a></h3>
<div class="code"><div class="codeContent">
<pre>&lt;html&gt; &#10;&lt;head&gt; &#10;&lt;title&gt;WebWork Tutorial Lesson 4.2 &#45; Example 2&lt;/title&gt; &#10;&lt;/head&gt; &#10;&#10;&lt;body&gt; &#10;&#10;&lt;p&gt;UI Form Tags Example result using Velocity:&lt;/p&gt; &#10;&#10;&lt;ul&gt; &#10;	&lt;li&gt;checkbox: $&#33;checkbox&lt;/li&gt; &#10;	&lt;li&gt;&#102;ile: $&#33;file&lt;/li&gt; &#10;	&lt;li&gt;hidden: $&#33;hidden&lt;/li&gt; &#10;	&lt;li&gt;password: $&#33;password&lt;/li&gt; &#10;	&lt;li&gt;radio: $&#33;radio&lt;/li&gt; &#10;	&lt;li&gt;select: $&#33;select&lt;/li&gt; &#10;	&lt;li&gt;textarea: $&#33;textarea&lt;/li&gt; &#10;	&lt;li&gt;textfield: $&#33;textfield&lt;/li&gt; &#10;&lt;/ul&gt; &#10;&#10;&lt;/body&gt; &#10;&lt;/html&gt;</pre>
</div></div><p class="paragraph"><h3 class="heading3"><a name="TutorialLesson04-02-FormProcessingAction.java%28sameaslesson4.1.1%29%3A"> FormProcessingAction.java (与4.1.1相同):</a></h3>
<div class="code"><div class="codeContent">
<pre><span class="java&#45;keyword">package</span> lesson04&#95;01&#95;01;&#10;&#10;<span class="java&#45;keyword">import</span> com.opensymphony.xwork.ActionSupport;&#10;&#10;<span class="java&#45;keyword">public</span> class FormProcessingAction <span class="java&#45;keyword">extends</span> ActionSupport &#123;&#10;	<span class="java&#45;keyword">private</span>&#160;<span class="java&#45;object">String</span> checkbox;&#10;	<span class="java&#45;keyword">private</span>&#160;<span class="java&#45;object">String</span> file;&#10;	<span class="java&#45;keyword">private</span>&#160;<span class="java&#45;object">String</span> hidden;&#10;	<span class="java&#45;keyword">private</span>&#160;<span class="java&#45;object">String</span> password;&#10;	<span class="java&#45;keyword">private</span>&#160;<span class="java&#45;object">String</span> radio;&#10;	<span class="java&#45;keyword">private</span>&#160;<span class="java&#45;object">String</span> select;&#10;	<span class="java&#45;keyword">private</span>&#160;<span class="java&#45;object">String</span> textarea;&#10;	<span class="java&#45;keyword">private</span>&#160;<span class="java&#45;object">String</span> textfield;&#10;	&#10;	<span class="java&#45;keyword">public</span>&#160;<span class="java&#45;object">String</span> getCheckbox() &#123; <span class="java&#45;keyword">return</span> checkbox; &#125;&#10;	<span class="java&#45;keyword">public</span>&#160;<span class="java&#45;object">String</span> getFile() &#123; <span class="java&#45;keyword">return</span> file; &#125;&#10;	<span class="java&#45;keyword">public</span>&#160;<span class="java&#45;object">String</span> getHidden() &#123; <span class="java&#45;keyword">return</span> hidden; &#125;&#10;	<span class="java&#45;keyword">public</span>&#160;<span class="java&#45;object">String</span> getPassword() &#123; <span class="java&#45;keyword">return</span> password; &#125;&#10;	<span class="java&#45;keyword">public</span>&#160;<span class="java&#45;object">String</span> getRadio() &#123; <span class="java&#45;keyword">return</span> radio; &#125;&#10;	<span class="java&#45;keyword">public</span>&#160;<span class="java&#45;object">String</span> getSelect() &#123; <span class="java&#45;keyword">return</span> select; &#125;&#10;	<span class="java&#45;keyword">public</span>&#160;<span class="java&#45;object">String</span> getTextarea() &#123; <span class="java&#45;keyword">return</span> textarea; &#125;&#10;	<span class="java&#45;keyword">public</span>&#160;<span class="java&#45;object">String</span> getTextfield() &#123; <span class="java&#45;keyword">return</span> textfield; &#125;&#10;	&#10;	<span class="java&#45;keyword">public</span> void setCheckbox(<span class="java&#45;object">String</span> checkbox) &#123; <span class="java&#45;keyword">this</span>.checkbox = checkbox; &#125;&#10;	<span class="java&#45;keyword">public</span> void setFile(<span class="java&#45;object">String</span> file) &#123; <span class="java&#45;keyword">this</span>.file = file; &#125;&#10;	<span class="java&#45;keyword">public</span> void setHidden(<span class="java&#45;object">String</span> hidden) &#123; <span class="java&#45;keyword">this</span>.hidden = hidden; &#125;&#10;	<span class="java&#45;keyword">public</span> void setPassword(<span class="java&#45;object">String</span> password) &#123; <span class="java&#45;keyword">this</span>.password = password; &#125;&#10;	<span class="java&#45;keyword">public</span> void setRadio(<span class="java&#45;object">String</span> radio) &#123; <span class="java&#45;keyword">this</span>.radio = radio; &#125;&#10;	<span class="java&#45;keyword">public</span> void setSelect(<span class="java&#45;object">String</span> select) &#123; <span class="java&#45;keyword">this</span>.select = select; &#125;&#10;	<span class="java&#45;keyword">public</span> void setTextarea(<span class="java&#45;object">String</span> textarea) &#123; <span class="java&#45;keyword">this</span>.textarea = textarea; &#125;&#10;	<span class="java&#45;keyword">public</span> void setTextfield(<span class="java&#45;object">String</span> textfield) &#123; <span class="java&#45;keyword">this</span>.textfield = textfield; &#125;&#10;	&#10;	<span class="java&#45;keyword">public</span>&#160;<span class="java&#45;object">String</span> execute() <span class="java&#45;keyword">throws</span> Exception &#123;&#10;		<span class="java&#45;keyword">return</span> SUCCESS;&#10;	&#125;&#10;&#125;</pre>
</div></div></p><h3 class="heading3"><a name="TutorialLesson04-02-FormProcessingActionvalidation.xml%28sameaslesson4.1.1%29%3A"> FormProcessingAction-validation.xml (与4.1.1相同):</a></h3>
<div class="code"><div class="codeContent">
<pre><span class="xml&#45;tag">&lt;&#33;DOCTYPE validators PUBLIC <span class="xml&#45;quote">&quot;&#45;//OpenSymphony Group//XWork Validator &#10;1.0//EN&quot;</span>&#160;<span class="xml&#45;quote">&quot;&#104;ttp://www.opensymphony.com/xwork/xwork&#45;validator&#45;1.0.dtd&quot;</span>&gt;</span>&#10;&#10;<span class="xml&#45;tag">&lt;validators&gt;</span>&#10;  <span class="xml&#45;tag">&lt;field name=<span class="xml&#45;quote">&quot;checkbox&quot;</span>&gt;</span>&#10;    <span class="xml&#45;tag">&lt;field&#45;validator type=<span class="xml&#45;quote">&quot;requiredstring&quot;</span>&gt;</span>&#10;      <span class="xml&#45;tag">&lt;message&gt;</span>Please, check the checkbox.<span class="xml&#45;tag">&lt;/message&gt;</span>&#10;    <span class="xml&#45;tag">&lt;/field&#45;validator&gt;</span>&#10;  <span class="xml&#45;tag">&lt;/field&gt;</span>&#10;&#10;  <span class="xml&#45;tag">&lt;field name=<span class="xml&#45;quote">&quot;file&quot;</span>&gt;</span>&#10;    <span class="xml&#45;tag">&lt;field&#45;validator type=<span class="xml&#45;quote">&quot;requiredstring&quot;</span>&gt;</span>&#10;      <span class="xml&#45;tag">&lt;message&gt;</span>Please select a file.<span class="xml&#45;tag">&lt;/message&gt;</span>&#10;    <span class="xml&#45;tag">&lt;/field&#45;validator&gt;</span>&#10;  <span class="xml&#45;tag">&lt;/field&gt;</span>&#10;&#10;  <span class="xml&#45;tag">&lt;field name=<span class="xml&#45;quote">&quot;password&quot;</span>&gt;</span>&#10;    <span class="xml&#45;tag">&lt;field&#45;validator type=<span class="xml&#45;quote">&quot;requiredstring&quot;</span>&gt;</span>&#10;      <span class="xml&#45;tag">&lt;message&gt;</span>Please type something in the password field.<span class="xml&#45;tag">&lt;/message&gt;</span>&#10;    <span class="xml&#45;tag">&lt;/field&#45;validator&gt;</span>&#10;  <span class="xml&#45;tag">&lt;/field&gt;</span>&#10;&#10;  <span class="xml&#45;tag">&lt;field name=<span class="xml&#45;quote">&quot;radio&quot;</span>&gt;</span>&#10;    <span class="xml&#45;tag">&lt;field&#45;validator type=<span class="xml&#45;quote">&quot;requiredstring&quot;</span>&gt;</span>&#10;      <span class="xml&#45;tag">&lt;message&gt;</span>Please select a radio button.<span class="xml&#45;tag">&lt;/message&gt;</span>&#10;    <span class="xml&#45;tag">&lt;/field&#45;validator&gt;</span>&#10;  <span class="xml&#45;tag">&lt;/field&gt;</span>&#10;&#10;  <span class="xml&#45;tag">&lt;field name=<span class="xml&#45;quote">&quot;select&quot;</span>&gt;</span>&#10;    <span class="xml&#45;tag">&lt;field&#45;validator type=<span class="xml&#45;quote">&quot;requiredstring&quot;</span>&gt;</span>&#10;      <span class="xml&#45;tag">&lt;message&gt;</span>Please select an option from the list.<span class="xml&#45;tag">&lt;/message&gt;</span>&#10;    <span class="xml&#45;tag">&lt;/field&#45;validator&gt;</span>&#10;  <span class="xml&#45;tag">&lt;/field&gt;</span>&#10;&#10;  <span class="xml&#45;tag">&lt;field name=<span class="xml&#45;quote">&quot;textarea&quot;</span>&gt;</span>&#10;    <span class="xml&#45;tag">&lt;field&#45;validator type=<span class="xml&#45;quote">&quot;requiredstring&quot;</span>&gt;</span>&#10;      <span class="xml&#45;tag">&lt;message&gt;</span>Please type something in the text area.<span class="xml&#45;tag">&lt;/message&gt;</span>&#10;    <span class="xml&#45;tag">&lt;/field&#45;validator&gt;</span>&#10;  <span class="xml&#45;tag">&lt;/field&gt;</span>&#10;&#10;  <span class="xml&#45;tag">&lt;field name=<span class="xml&#45;quote">&quot;textfield&quot;</span>&gt;</span>&#10;    <span class="xml&#45;tag">&lt;field&#45;validator type=<span class="xml&#45;quote">&quot;requiredstring&quot;</span>&gt;</span>&#10;      <span class="xml&#45;tag">&lt;message&gt;</span>Please type something in the text field.<span class="xml&#45;tag">&lt;/message&gt;</span>&#10;    <span class="xml&#45;tag">&lt;/field&#45;validator&gt;</span>&#10;  <span class="xml&#45;tag">&lt;/field&gt;</span>&#10;<span class="xml&#45;tag">&lt;/validators&gt;</span></pre>
</div></div><br/>

<blockquote class="blockquote"> <a href="TutorialExamples.html" title="TutorialExamples">试试这个例子!</a></blockquote><p class="paragraph">&#8212;</p>上面的例子没有使用<tt class="monospaced">#param</tt>标签. 因此, 让我们回顾<a href="TutorialLesson04-01-01.html" title="TutorialLesson04-01-01">4.1.1</a>中的另一个例子 - 定制组件:<p class="paragraph"><h3 class="heading3"><a name="TutorialLesson04-02-ex03.vm%3A"> ex03.vm:</a></h3>
<div class="code"><div class="codeContent">
<pre>&lt;html&gt; &#10;&lt;head&gt; &#10;&lt;title&gt;WebWork Tutorial &#45; Lesson 4.2 &#45; Example 3&lt;/title&gt; &#10;&lt;/head&gt; &#10;&#10;&lt;body&gt; &#10;&#10;&lt;p&gt;Custom Component Example:&lt;/p&gt; &#10;&#10;&lt;p&gt; &#10;#bodytag (Component <span class="java&#45;quote">&quot;template=datefield.vm&quot;</span>) &#10;	#param (<span class="java&#45;quote">&quot;label&quot;</span>&#160;<span class="java&#45;quote">&quot;Date&quot;</span>) &#10;	#param (<span class="java&#45;quote">&quot;name&quot;</span>&#160;<span class="java&#45;quote">&quot;mydatefield&quot;</span>) &#10;	#param (<span class="java&#45;quote">&quot;size&quot;</span>&#160;<span class="java&#45;quote">&quot;3&quot;</span>) &#10;#end &#10;&lt;/p&gt; &#10;&#10;&lt;/body&gt; &#10;&lt;/html&gt;</pre>
</div></div></p><h3 class="heading3"><a name="TutorialLesson04-02-%2Ftemplate%2Fxhtml%2Fdatefield.vm%28sameaslesson4.1.1%29%3A"> /template/xhtml/datefield.vm (与4.1.1相同):</a></h3>
<div class="code"><div class="codeContent">
<pre>#set ($name = $parameters.get(&#039;name&#039;)) &#10;#set ($size = $parameters.get(&#039;size&#039;)) &#10;#set ($yearSize = $size &#42; 2) &#10;&#10;$parameters.get(&#039;label&#039;): &#10;&lt;input type=<span class="java&#45;quote">&quot;text&quot;</span> name=<span class="java&#45;quote">&quot;$&#123;name&#125;.day&quot;</span> size=<span class="java&#45;quote">&quot;$size&quot;</span> /&gt; / &#10;&lt;input type=<span class="java&#45;quote">&quot;text&quot;</span> name=<span class="java&#45;quote">&quot;$&#123;name&#125;.month&quot;</span> size=<span class="java&#45;quote">&quot;$size&quot;</span> /&gt; / &#10;&lt;input type=<span class="java&#45;quote">&quot;text&quot;</span> name=<span class="java&#45;quote">&quot;$&#123;name&#125;.year&quot;</span> size=<span class="java&#45;quote">&quot;$yearSize&quot;</span> /&gt; (dd/mm/yyyy)</pre>
</div></div><p class="paragraph">注意, 这次我们没有像使用JSP标签那样将<tt class="monospaced">Date</tt>和<tt class="monospaced">mydatefield</tt>用单引号框起来.</p><blockquote class="blockquote"> <a href="TutorialExamples.html" title="TutorialExamples">试试这个例子!</a></blockquote><p class="paragraph"><hr class="line"/></p><a href="TutorialLesson04-01.html" title="TutorialLesson04-01">上一课</a> | <a href="TutorialLesson04-03.html" title="TutorialLesson04-03">下一课</a><br/>



				    
                    			    </td>
		    </tr>
	    </table>
	    <table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
				<td height="12" background="border/border_bottom.gif"><img src="border/spacer.gif" width="1" height="1" border="0"/></td>
			</tr>
		    <tr>
			    <td align="center"><font color="grey">Document generated by Confluence on Dec 14, 2004 16:36</font></td>
		    </tr>
	    </table>
    </body>
</html>